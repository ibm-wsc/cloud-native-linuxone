
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ibm-wsc.github.io/cloud-native-linuxone/on-premises-lab/devsecops/devsecops/">
      
      
        <link rel="prev" href="../../application-promotion/action/">
      
      
        <link rel="next" href="../../../assignment/">
      
      <link rel="icon" href="../../../images/pipelines-logo.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.15">
    
    
      
        <title>Add the "Sec" in "DevSecOps" - Cloud Native LinuxONE Workshop</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../../../css/print-site.css">
    
      <link rel="stylesheet" href="../../../css/print-site-material.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-174658170-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configure-sonarqube-code-analysis-in-your-pipeline" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Cloud Native LinuxONE Workshop" class="md-header__button md-logo" aria-label="Cloud Native LinuxONE Workshop" data-md-component="logo">
      
  <img src="../../../images/pipelines-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cloud Native LinuxONE Workshop
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Add the "Sec" in "DevSecOps"
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ibm-wsc/cloud-native-linuxone/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Cloud Native LinuxONE Workshop" class="md-nav__button md-logo" aria-label="Cloud Native LinuxONE Workshop" data-md-component="logo">
      
  <img src="../../../images/pipelines-logo.png" alt="logo">

    </a>
    Cloud Native LinuxONE Workshop
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ibm-wsc/cloud-native-linuxone/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Cloud Lab
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Cloud Lab
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud-lab/prerequisites/" class="md-nav__link">
        Prerequisites
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../cloud-lab/build-and-deploy/">Build and Deploy Pet Clinic</a>
          
            <label for="__nav_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Build and Deploy Pet Clinic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud-lab/build-and-deploy/upandrunning/" class="md-nav__link">
        PetClinic Up and Running
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../cloud-lab/full-dev-pipeline/">Configure PetClinic's Pipeline</a>
          
            <label for="__nav_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Configure PetClinic's Pipeline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud-lab/full-dev-pipeline/pipeline/" class="md-nav__link">
        Configure Build and Test
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud-lab/full-dev-pipeline/runpipeline/" class="md-nav__link">
        Configure Development Deployment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../cloud-lab/application-promotion/">Test and Promote Pet Clinic</a>
          
            <label for="__nav_3_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Test and Promote Pet Clinic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud-lab/application-promotion/promote/" class="md-nav__link">
        Promoting Application
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud-lab/application-promotion/git/" class="md-nav__link">
        Integrating Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud-lab/application-promotion/action/" class="md-nav__link">
        CI/CD in Action
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud-lab/devsecops/devsecops/" class="md-nav__link">
        Add the "Sec" in "DevSecOps"
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud-lab/cleanup/full-cleanup/" class="md-nav__link">
        Cleanup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud-lab/devsecops/sonarqube/" class="md-nav__link">
        REFERENCE 1. Setting up SonarQube Server in OpenShift
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud-lab/yamlsetup/" class="md-nav__link">
        REFERENCE 2. Setting up PetClinic OpenShift Pipeline using yaml files
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          On-premises Lab
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          On-premises Lab
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../build-and-deploy/">Build and Deploy Pet Clinic</a>
          
            <label for="__nav_4_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Build and Deploy Pet Clinic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../build-and-deploy/upandrunning/" class="md-nav__link">
        PetClinic Up and Running
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../full-dev-pipeline/">Configure PetClinic's Pipeline</a>
          
            <label for="__nav_4_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Configure PetClinic's Pipeline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../full-dev-pipeline/pipeline/" class="md-nav__link">
        Configure Build and Test
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../full-dev-pipeline/runpipeline/" class="md-nav__link">
        Configure Development Deployment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../application-promotion/">Test and Promote Pet Clinic</a>
          
            <label for="__nav_4_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Test and Promote Pet Clinic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../application-promotion/promote/" class="md-nav__link">
        Promoting Application
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../application-promotion/git/" class="md-nav__link">
        Integrating Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../application-promotion/action/" class="md-nav__link">
        CI/CD in Action
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Add the "Sec" in "DevSecOps"
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Add the "Sec" in "DevSecOps"
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-maven-settings-with-the-sonar-scanner-plugin" class="md-nav__link">
    Configuring maven-settings with the Sonar scanner plugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-the-sonarqube-server-with-your-assigned-credentials" class="md-nav__link">
    Accessing the SonarQube server with your assigned credentials
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-a-security-token-for-your-sonarqube-account" class="md-nav__link">
    Generate a security token for your SonarQube account
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-maven-task-into-pipeline-to-do-code-analysis" class="md-nav__link">
    Configuring maven task into Pipeline to do code analysis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-the-new-maven-settings-workspace-to-the-triggertemplate" class="md-nav__link">
    Add the new maven-settings workspace to the TriggerTemplate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-the-pipeline" class="md-nav__link">
    Run the pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analyzing-the-failure-in-sonarqube" class="md-nav__link">
    Analyzing the Failure in SonarQube
  </a>
  
    <nav class="md-nav" aria-label="Analyzing the Failure in SonarQube">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#view-your-project" class="md-nav__link">
    View your project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-what-caused-the-failure" class="md-nav__link">
    Check what caused the failure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-petclinic-to-fix-the-issues-that-came-up-in-the-sonarqube-scan" class="md-nav__link">
    Update PetClinic to fix the issues that came up in the SonarQube scan
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verify-that-vulnerabilities-in-petclinic-have-been-patched" class="md-nav__link">
    Verify that vulnerabilities in petclinic have been patched
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../assignment/" class="md-nav__link">
        Lab Assignments
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../resources/" class="md-nav__link">
        Other resources
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../proposechange/" class="md-nav__link">
        Propose a change
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../print_page/" class="md-nav__link">
        Print Site
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-maven-settings-with-the-sonar-scanner-plugin" class="md-nav__link">
    Configuring maven-settings with the Sonar scanner plugin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-the-sonarqube-server-with-your-assigned-credentials" class="md-nav__link">
    Accessing the SonarQube server with your assigned credentials
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-a-security-token-for-your-sonarqube-account" class="md-nav__link">
    Generate a security token for your SonarQube account
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-maven-task-into-pipeline-to-do-code-analysis" class="md-nav__link">
    Configuring maven task into Pipeline to do code analysis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-the-new-maven-settings-workspace-to-the-triggertemplate" class="md-nav__link">
    Add the new maven-settings workspace to the TriggerTemplate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-the-pipeline" class="md-nav__link">
    Run the pipeline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analyzing-the-failure-in-sonarqube" class="md-nav__link">
    Analyzing the Failure in SonarQube
  </a>
  
    <nav class="md-nav" aria-label="Analyzing the Failure in SonarQube">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#view-your-project" class="md-nav__link">
    View your project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-what-caused-the-failure" class="md-nav__link">
    Check what caused the failure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-petclinic-to-fix-the-issues-that-came-up-in-the-sonarqube-scan" class="md-nav__link">
    Update PetClinic to fix the issues that came up in the SonarQube scan
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verify-that-vulnerabilities-in-petclinic-have-been-patched" class="md-nav__link">
    Verify that vulnerabilities in petclinic have been patched
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/ibm-wsc/cloud-native-linuxone/edit/main/docs/on-premises-lab/devsecops/devsecops.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/ibm-wsc/cloud-native-linuxone/raw/main/docs/on-premises-lab/devsecops/devsecops.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="configure-sonarqube-code-analysis-in-your-pipeline">Configure SonarQube code analysis in your Pipeline<a class="headerlink" href="#configure-sonarqube-code-analysis-in-your-pipeline" title="Permanent link">&para;</a></h1>
<p>As a bonus lab, you will now configure an extra task in your existing Pipeline to conduct code scanning on your petclinic source code. This exercise is to show you one way of incorporating security code scanning as part of your automated <abbr title="(Continuous Integration / Continuous Deployment): CI = Automate the building and testing of new code to integrate it into the codebase. CD = Automate releasing (deploying the build) into different environments. Together, your application is seamlessly updated, tested and deployed into your environments when new code is published (via Source Code Management software such as Git Hub).">CI/CD</abbr> pipeline.</p>
<p>We will use the popular open source package SonarQube to do the code scanning. According to Wikipedia, "SonarQube is an open-source platform developed by SonarSource for continuous inspection of code quality to perform automatic reviews with static analysis of code to detect bugs, code smells, and security vulnerabilities on 20+ programming languages."</p>
<p>For Petclinic, we will be using SonarScanner for Maven. The ability to execute the SonarQube analysis via a regular Maven goal makes it available anywhere Maven is available (developer build, CI server, etc.), without the need to manually download, setup, and maintain a SonarQube Runner installation. For more information on SonarScanner for Maven, please see <a href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-maven/" rel="noopener" target="_blank">here</a>.</p>
<h2 id="configuring-maven-settings-with-the-sonar-scanner-plugin">Configuring maven-settings with the Sonar scanner plugin<a class="headerlink" href="#configuring-maven-settings-with-the-sonar-scanner-plugin" title="Permanent link">&para;</a></h2>
<p>We need to configure maven with the Sonar scanner plugin prefix. We will do that by including the sonar scanner plugin in the maven settings file.</p>
<p>We will create a <abbr title="(k8s): an open-source system for automating deployment, scaling, and management of containerized applications.">Kubernetes</abbr> ConfigMap for the mavens settings file.</p>
<p>Click on the Import Yaml button at the top of the <abbr title="(OpenShift Container Platform / OCP): an open source container application platform based on the Kubernetes container orchestrator for enterprise application development and deployment">OpenShift</abbr> console (the '+' symbol).</p>
<p>Copy and paste the entirety of the following into the editor and then hit "Create" (copy by clicking on the copy icon in the top right of the box below).</p>
<div class="highlight"><pre><span></span><code>kind:<span class="w"> </span>ConfigMap
apiVersion:<span class="w"> </span>v1
metadata:
<span class="w">  </span>name:<span class="w"> </span>maven-settings
data:
<span class="w">  </span>settings.xml:<span class="w"> </span><span class="p">|</span>
<span class="w">    </span>&lt;?xml<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span><span class="w"> </span><span class="nv">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span>?&gt;
<span class="w">    </span>&lt;settings&gt;
<span class="w">      </span>&lt;pluginGroups&gt;
<span class="w">        </span>&lt;pluginGroup&gt;io.spring.javaformat&lt;/pluginGroup&gt;
<span class="w">        </span>&lt;pluginGroup&gt;org.sonarsource.scanner.maven&lt;/pluginGroup&gt;
<span class="w">      </span>&lt;/pluginGroups&gt;
<span class="w">      </span>&lt;profiles&gt;
<span class="w">        </span>&lt;profile&gt;
<span class="w">          </span>&lt;id&gt;sonar&lt;/id&gt;
<span class="w">          </span>&lt;activation&gt;
<span class="w">            </span>&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
<span class="w">          </span>&lt;/activation&gt;
<span class="w">          </span>&lt;properties&gt;
<span class="w">            </span>&lt;!--<span class="w"> </span>Wait<span class="w"> </span><span class="k">until</span><span class="w"> </span>the<span class="w"> </span>quality<span class="w"> </span>check<span class="w"> </span>is<span class="w"> </span><span class="nb">complete</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>SonarQube<span class="w">  </span>--&gt;
<span class="w">            </span>&lt;sonar.qualitygate.wait&gt;
<span class="w">              </span><span class="nb">true</span>
<span class="w">            </span>&lt;/sonar.qualitygate.wait&gt;
<span class="w">            </span>&lt;!--<span class="w"> </span>Exclude<span class="w"> </span>DTO<span class="w"> </span>Files<span class="w"> </span>from<span class="w"> </span>SonarQube<span class="w"> </span>duplication<span class="w"> </span>check<span class="w"> </span>as<span class="w"> </span>these<span class="w"> </span>should<span class="w"> </span>have<span class="w"> </span>duplications<span class="w"> </span>--&gt;
<span class="w">            </span>&lt;sonar.cpd.exclusions&gt;
<span class="w">              </span>**/*DTO*
<span class="w">            </span>&lt;/sonar.cpd.exclusions&gt;
<span class="w">          </span>&lt;/properties&gt;
<span class="w">        </span>&lt;/profile&gt;
<span class="w">      </span>&lt;/profiles&gt;
<span class="w">    </span>&lt;/settings&gt;
</code></pre></div>
<h2 id="accessing-the-sonarqube-server-with-your-assigned-credentials">Accessing the SonarQube server with your assigned credentials<a class="headerlink" href="#accessing-the-sonarqube-server-with-your-assigned-credentials" title="Permanent link">&para;</a></h2>
<p>The lab instructors have already setup a SonarQube server within the <abbr title="(OpenShift Container Platform / OCP): an open source container application platform based on the Kubernetes container orchestrator for enterprise application development and deployment">OpenShift</abbr> cluster for you to access for code scanning. Credentials have also been setup for you. Please use your assigned credentials to test access to the SonarQube Server.</p>
<ol>
<li>
<p>Access the SonarQube server <a href="https://sonarqube-sonarqube.apps.atsocpd3.dmz" rel="noopener" target="_blank">here</a></p>
</li>
<li>
<p>Select <code>Log in</code> in the upper right hand corner. And log in with your assigned credentials.</p>
<div class="admonition failure">
<p class="admonition-title">If you are not successful with this step</p>
<p>Please let an instructor know.</p>
</div>
</li>
</ol>
<h2 id="generate-a-security-token-for-your-sonarqube-account">Generate a security token for your SonarQube account<a class="headerlink" href="#generate-a-security-token-for-your-sonarqube-account" title="Permanent link">&para;</a></h2>
<p>You'll need either your credentials, or an access token associated with your account, in order to access the server for code scanning. </p>
<p>Let's use the access token method.</p>
<p>Now that you've logged in, select your account in the upper right hand corner of the SonarQube server page.</p>
<p><img alt="sonarqubeaccount" src="../../../images/DevSecOps/sonarqubeaccount.png" /> </p>
<p>In the account panel, go to the security tab, and type in the name <code>petclinic</code> to help identify your token, and then select <code>Generate</code>. Now copy and save this token or leave the page/tab open to copy it when you need it in the next subsection.</p>
<p><img alt="sonarqubetoken" src="../../../images/DevSecOps/sonarqubetoken.png" /> </p>
<h2 id="configuring-maven-task-into-pipeline-to-do-code-analysis">Configuring maven task into Pipeline to do code analysis<a class="headerlink" href="#configuring-maven-task-into-pipeline-to-do-code-analysis" title="Permanent link">&para;</a></h2>
<p>Go back to your <abbr title="(OpenShift Container Platform / OCP): an open source container application platform based on the Kubernetes container orchestrator for enterprise application development and deployment">OpenShift</abbr> console and go to your pipeline. Your pipeline should look like the picture below, at this point of the workshop.</p>
<p><img alt="presqpipeline" src="../../../images/DevSecOps/presqpipelineop.png" /></p>
<ol>
<li>
<p>Add <code>maven-settings</code> workspace to your pipeline</p>
<p><img alt="Add Maven Settings Workspace" src="../../../images/DevSecOps/AddMavenSettingsWorkspace.png" /></p>
<ol>
<li>
<p>Click <code>Add workspace</code></p>
</li>
<li>
<p>Name the workspace</p>
<div class="highlight"><pre><span></span><code>maven-settings
</code></pre></div>
</li>
<li>
<p>Click <code>Save</code></p>
</li>
</ol>
</li>
<li>
<p>We will insert the code analysis task before the build task. The idea being we want to scan the source code for bugs and vulnerabilities, before we build a <abbr title="application and all of its software dependencies packaged into a tarball that runs as a container using a runtime engine such as Docker or Podman.">container image</abbr> out of it.</p>
<p>a. From your pipeline screen, Go to Actions -&gt; Edit Pipeline.</p>
<p>b. Select the plus sign before the build task, as in the picture below.</p>
<p><img alt="addsqtask" src="../../../images/DevSecOps/addsqtaskop.png" /></p>
<p>c. Then search for and select the <code>maven</code> task.</p>
<p><img alt="maventask" src="../../../images/DevSecOps/maventaskop.png" /></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Once you add a specific task (i.e. <code>maven</code>), clicking on the oval of the task will enable you to edit its default values for your needs.</p>
</div>
</li>
<li>
<p>Give the task the following parameters to do the code analysis with the proper maven goals set to do code scanning against our SonarQube server.</p>
<p><img alt="codeanalysistask" src="../../../images/DevSecOps/codeanalysistask.png" /></p>
<div class="highlight"><span class="filename">Display Name</span><pre><span></span><code>code-analysis
</code></pre></div>
<div class="highlight"><span class="filename">MAVEN_IMAGE</span><pre><span></span><code>maven:3.8.1-jdk-11-openj9
</code></pre></div>
<p><strong>GOALS</strong></p>
<div class="highlight"><span class="filename">GOAL 1</span><pre><span></span><code>package
</code></pre></div>
<div class="highlight"><span class="filename">GOAL 2</span><pre><span></span><code>sonar:sonar
</code></pre></div>
<div class="highlight"><span class="filename">GOAL 3</span><pre><span></span><code>-Dsonar.login<span class="o">=</span>&lt;use-your-token-from-previous-step&gt;
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Use your token</p>
<p>You need to replace <code>&lt;use-your-token-from-previous-step&gt;</code> with your actual token.</p>
</div>
<div class="highlight"><span class="filename">GOAL 4</span><pre><span></span><code>-Dsonar.host.url<span class="o">=</span>http://sonarqube.sonarqube:9000
</code></pre></div>
<div class="highlight"><span class="filename">GOAL 5</span><pre><span></span><code>-Dsonar.projectName<span class="o">=</span>petclinic-&lt;your-student&gt;
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Use your student...</p>
<p>Be mindful to put your student in the value of the <code>Dsonar.projectName</code> and <code>`Dsonar.projectKey</code> goals (i.e., substitute <code>&lt;your-student&gt;</code> with your student such as <code>petclinic-student00</code>).</p>
</div>
<div class="highlight"><span class="filename">GOAL 6</span><pre><span></span><code>-Dsonar.projectKey<span class="o">=</span>petclinic-&lt;your-student&gt;
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">...Please use your student</p>
<p>Remember to replace <code>&lt;your-student&gt;</code> with your student such as <code>petclinic-student00</code>.</p>
</div>
<div class="highlight"><span class="filename">SOURCE (choose from dropdown)</span><pre><span></span><code>workspace
</code></pre></div>
<div class="highlight"><span class="filename">MAVEN-SETTINGS (choose from dropdown)</span><pre><span></span><code>maven-settings
</code></pre></div>
</li>
<li>
<p>Now you can click away to get back to the main pipeline edit panel.</p>
</li>
<li>
<p>Save the <code>pipeline</code>.</p>
</li>
</ol>
<h2 id="add-the-new-maven-settings-workspace-to-the-triggertemplate">Add the new <code>maven-settings</code> workspace to the TriggerTemplate<a class="headerlink" href="#add-the-new-maven-settings-workspace-to-the-triggertemplate" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Go to the <strong>TriggerTemplates</strong> section of your pipeline and click the link to take you to your pipeline's <code>TriggerTemplate</code></p>
<p><img alt="Click on TriggerTemplate" src="../../../images/DevSecOps/ClickTriggerTemplateOp.png" /></p>
</li>
<li>
<p>Edit the <code>TriggerTemplate</code></p>
<ol>
<li>Click Actions</li>
<li>Choose <code>Edit TriggerTemplate</code> from the dropdown menu</li>
</ol>
<p><img alt="Edit Trigger Template" src="../../../images/DevSecOps/EditTriggerTemplate.png" /></p>
</li>
<li>
<p>Add the workspace to the <code>workspaces</code> section of the TriggerTemplate.</p>
<ol>
<li>
<p>Add the following code to the <code>workspaces</code> section</p>
<div class="highlight"><pre><span></span><code>          - name: maven-settings
            configMap:
              name: maven-settings
</code></pre></div>
<div class="admonition caution">
<p class="admonition-title">Indentation Matters!</p>
<p>Take care to match the indentation in the picture below</p>
</div>
</li>
<li>
<p>Click <code>Save</code> to apply your changes</p>
</li>
</ol>
<p><img alt="Add Workspace to triggertemplate" src="../../../images/DevSecOps/AddWorkspaceToTriggerTemplate.png" /></p>
</li>
</ol>
<h2 id="run-the-pipeline">Run the pipeline<a class="headerlink" href="#run-the-pipeline" title="Permanent link">&para;</a></h2>
<p>Go to the Actions menu of your pipeline and select Start.</p>
<p><img alt="startpipeline" src="../../../images/DevSecOps/startpipelinerunop.png" /></p>
<p>Hit Start after reviewing the settings panel and making sure to set the options for the <code>source</code>(select <code>PersistentVolumeClaim</code> and your claim) and <code>maven-settings</code> ( select <code>configmap</code> as the resource choice and <code>maven-settings</code> as the specific configmap to use as in the image below) workspaces.</p>
<p><img alt="Choose workspaces when starting pipeline" src="../../../images/DevSecOps/ChooseMavenSettings.png" /></p>
<p>You can go to your pipeline logs and see the output for each of the tasks. <TO DO .. add screen shot of pipeline logs></p>
<p>It will take 15-20 minutes for the code analysis to run completely through. This task will wait until the quality check is complete in SonarQube and if the quality gate fails, this task will fail and the pipeline will not continue to run. If the quality gate succeeds, this task will succeed and progress onto the next task in the pipeline.</p>
<p>Let's see if our code passes the code analysis...</p>
<p><img alt="codeanalysisfail" src="../../../images/DevSecOps/codeanalysisfailop.png" /></p>
<p>It fails <img alt="😞" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f61e.svg" title=":disappointed:" />. Next, we are going to see why it failed.</p>
<h2 id="analyzing-the-failure-in-sonarqube">Analyzing the Failure in SonarQube<a class="headerlink" href="#analyzing-the-failure-in-sonarqube" title="Permanent link">&para;</a></h2>
<h3 id="view-your-project">View your project<a class="headerlink" href="#view-your-project" title="Permanent link">&para;</a></h3>
<p>At this point please return to the SonarQube server <a href="https://sonarqube-sonarqube.apps.atsocpd3.dmz" rel="noopener" target="_blank">here</a>, and view the code scan report to see what caused the quality check to fail. After logging in, please do the following:</p>
<p><img alt="SonarProject View Fail" src="../../../images/DevSecOps/FindPetclinicSonar.png" /></p>
<ol>
<li>
<p>Type your student in the project search bar to bring up your project</p>
</li>
<li>
<p>Click on your project (which should have a <code>Failed</code> label)</p>
</li>
</ol>
<h3 id="check-what-caused-the-failure">Check what caused the failure<a class="headerlink" href="#check-what-caused-the-failure" title="Permanent link">&para;</a></h3>
<p><img alt="Failure Check" src="../../../images/DevSecOps/CheckFailureReason.png" /></p>
<p>You can see that the overall code check failed due to a security rating worse than A. You should see 9 vulnerabilities that caused this failure. In order to check what these are, please click on the vulnerabilities link as shown in the image.</p>
<p><img alt="Vulnerabilities" src="../../../images/DevSecOps/VulnerabilityOverview.png" /></p>
<ol>
<li>
<p>See individual vulnerabilities and click on <code>Why is this an issue?</code></p>
</li>
<li>
<p>Read the vulnerability descriptions to see why they are a problem and get insights into fixing them in the code.</p>
</li>
</ol>
<h2 id="update-petclinic-to-fix-the-issues-that-came-up-in-the-sonarqube-scan">Update PetClinic to fix the issues that came up in the SonarQube scan<a class="headerlink" href="#update-petclinic-to-fix-the-issues-that-came-up-in-the-sonarqube-scan" title="Permanent link">&para;</a></h2>
<p>In the scan, there were various security issues related to the use of entity objects for data transfer instead of data transfer objects (DTOs) when using @RequestMapping and similar methods. In order to fix these, you will have to make changes to the java code for the application. Luckily for you, the changes have already been made on the <code>security-fixes</code> branch of the project. In order to bring these changes to the main branch you will need to make a pul request and merge the <code>security-fixes</code> branch into the main branch. </p>
<p>You can do this with the following actions:</p>
<ol>
<li>
<p>Go to your petclinic repository in Gogs and create a new pull request</p>
<p><img alt="Create new pull request" src="../../../images/DevSecOps/OpenNewPullRequestOp.png" /></p>
<ol>
<li>
<p>Navigate to the <code>Files</code> tab of your repository</p>
</li>
<li>
<p>Click on the green pull request button to the left of the branch</p>
</li>
</ol>
</li>
<li>
<p>Choose the <code>security-fixes</code> branch to merge into the <code>main</code> branch</p>
<p><img alt="Select security fixes" src="../../../images/DevSecOps/SelectSecurityFixes.png" /></p>
</li>
<li>
<p>Write a justification for your pull request and create it</p>
<p><img alt="Create pull request" src="../../../images/DevSecOps/CreatePullRequestOp.png" /></p>
<ol>
<li>
<p>Give your pull request a title such as:</p>
<div class="highlight"><pre><span></span><code>Security<span class="w"> </span>Fixes
</code></pre></div>
</li>
<li>
<p>Write a justification such as </p>
<div class="highlight"><pre><span></span><code>Create<span class="w"> </span>fixes<span class="w"> </span><span class="k">for</span><span class="w"> </span>all<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>security<span class="w"> </span>vulnerabilities<span class="w"> </span>that<span class="w"> </span>showed<span class="w"> </span>up<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>SonarQube<span class="w"> </span>scan.
</code></pre></div>
</li>
<li>
<p>Click <code>Create Pull Request</code></p>
</li>
</ol>
</li>
<li>
<p>Merge your pull request, merging the <code>security-fixes</code> branch with all of the security fixes into the <code>main</code> branch.</p>
<p><img alt="Merge pull request" src="../../../images/DevSecOps/MergePullRequestOp.png" /></p>
</li>
<li>
<p>Delete the <code>security-fixes</code> branch now that it's been successfully merged into the <code>main</code> branch of your petclinic repository fork.</p>
<p><img alt="Delete security-fixes branch" src="../../../images/DevSecOps/SuccessfullyMergedOp.png" /></p>
<ol>
<li>
<p>See that the <code>security-fixes</code> branch was successfully merged!</p>
</li>
<li>
<p>Click <code>Delete branch</code> to delete the now superfluous <code>security-fixes</code> branch.</p>
</li>
</ol>
</li>
</ol>
<h2 id="verify-that-vulnerabilities-in-petclinic-have-been-patched">Verify that vulnerabilities in petclinic have been patched<a class="headerlink" href="#verify-that-vulnerabilities-in-petclinic-have-been-patched" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>See a new pipeline triggered back in the <code>Pipelines</code> view of your <abbr title="(OpenShift Container Platform / OCP): an open source container application platform based on the Kubernetes container orchestrator for enterprise application development and deployment">OpenShift</abbr> namespace.</p>
<p><img alt="New pipeline running" src="../../../images/DevSecOps/PipelineRunning.png" /></p>
</li>
<li>
<p>View the pipeline run and watch it successfully complete the <code>code-analysis</code> task.</p>
<p><img alt="Security Success" src="../../../images/DevSecOps/CodeAnalysisPassesOp.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also wait to see the other tasks pass but since the main goal of this section was to focus on integrating security into <abbr title="methodology that accelerates delivery and improves quality of software through automation (CI/CD) that eliminates the friction between software development and IT operations">DevOps</abbr> and you have already gone through the pipeline without the <code>code-analysis</code> task, there is really no need to do so.</p>
</div>
</li>
<li>
<p>View the <a href="https://sonarqube-1670885178028.apps.cloudnative.marist.edu/" rel="noopener" target="_blank">SonarQube server</a> again to see the updated results for your project (based on the latest scan)</p>
<ol>
<li>
<p>See your project passes and click on it for full results</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Search for your project with your student like before.</p>
</div>
<p><img alt="See your project passes" src="../../../images/DevSecOps/SeeYourProjectPasses.png" /></p>
</li>
<li>
<p>View the final results of the scan.</p>
<p><img alt="See Passed Full Results" src="../../../images/DevSecOps/PassedFullPage.png" /></p>
<p>Those pesky vulnerabilities have been squashed! <img alt="🎉" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f389.svg" title=":tada:" /></p>
</li>
</ol>
</li>
</ol>
<h2 id="summary">Summary <img alt="🔭" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f52d.svg" title=":telescope:" /><a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>In this section, you started on your DevSecOps journey by integrating SonarQube security scanning into your <abbr title="methodology that accelerates delivery and improves quality of software through automation (CI/CD) that eliminates the friction between software development and IT operations">DevOps</abbr> pipeline. Initially, the scan flagged several security vulnerabilities, causing the pipeline to fail before the vulnerable code could get packaged into a <abbr title="a standard unit of software that packages up code and all its dependencies so the application runs quickly and reliably from one computing environment to another">container</abbr>. Next, you were able to dig into the vulnerabilities and figure out what needed to be changed with the SonarQube report. Then, you applied a security patch, eliminating the flagged security vulnerabilities in the PetClinic application. With these changes, your pipeline succeeded having containerized and deployed secure code. Finally, you are left with a pipeline set up to catch any new security vulnerabilities as soon as they appear. Congratulations!</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">July 11, 2023</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 19, 2021</span>
      
    
  </small>
</div>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35Z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c.67 0 1.32.12 1.94.33L13 9.35l-4 5 3 7M16.5 3C19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35l-1-7 4.5-5-2.65-5.08C13.87 3.47 15.17 3 16.5 3Z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback! Help me improve this page by using my <a href="https://github.com/ibm-wsc/cloud-native-linuxone/issues/new/?title=[Feedback]+Add%20the%20%22Sec%22%20in%20%22DevSecOps%22+-+/on-premises-lab/devsecops/devsecops/" target="_blank" rel="noopener">feedback form</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../application-promotion/action/" class="md-footer__link md-footer__link--prev" aria-label="Previous: CI/CD in Action" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                CI/CD in Action
              </div>
            </div>
          </a>
        
        
          
          <a href="../../../assignment/" class="md-footer__link md-footer__link--next" aria-label="Next: Lab Assignments" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Lab Assignments
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 IBM – <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ibm-wsc" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/u/s390x" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make the documentation as good as possible.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.indexes", "navigation.tracking", "content.action.edit", "content.action.view", "navigation.footer", "content.tabs.link", "search.share"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
    
  </body>
</html>